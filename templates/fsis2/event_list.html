{% extends "fsis2/fsis2_base.html" %}

<!-- {% block pages %}


{% endblock %}
-->

{% block extrahead %} 
 {% if cwt %}
    {{ map.media }}
 {% endif %}

<!-- tablesorter plugin -->
<script src="{{ STATIC_URL }}js/jquery.tablesorter.js"></script>
<!-- tablesorter widget file - loaded after the plugin -->
<script src="{{ STATIC_URL }}js/jquery.tablesorter.widgets.js"></script>

{% endblock %}

{% block content %}

{% load humanize %}
{% load fsis2_filters %}

<div class="container">

  <h2>{% if year %} {{ year|date:'Y' }}  {% endif %}Stocking Events {% if cwt %} associated with cwt {{ cwt|format_cwt }} {% endif %}</h2>

  {% if not cwt %}

  <div class="row">
    <div class="col-sm-9">          


      <div class="btn-group btn-group-xs">
        <a href="{% url 'event_year_list' 2012 %}" class="btn btn-default" role="button">2012</a>
        <a href="{% url 'event_year_list' 2011 %}" class="btn btn-default" role="button">2011</a>  
        <a href="{% url 'event_year_list' 2010 %}" class="btn btn-default" role="button">2010</a>
        <a href="{% url 'event_year_list' 2009 %}" class="btn btn-default" role="button">2009</a>
        <a href="{% url 'event_year_list' 2008 %}" class="btn btn-default" role="button">2008</a>
        <a href="#" class="btn btn-default" role="button">Older</a>
      </div>


      <div class="btn-group btn-group-xs">
        {% for yr in year_list|slice ":10" %}
        <a href="{% url 'event_year_list' yr %}" class="btn btn-default" role="button">{{ yr }}</a>
        {% endfor %}
        <a href="#" class="btn btn-default" role="button">Older</a>
      </div>



    </div>
    <div class="col-sm-3">          
      <form class="" role="search" action="{% url "event_list" %}">
        <div class="input-group">
          <input type="text" class="form-control" name="event"
                 placeholder="Stocking Event Number">
          <div class="input-group-btn">
            <button class="btn btn-default" type="submit">
              <i class="glyphicon glyphicon-search"></i>
            </button>
          </div>
        </div><!-- /input-group -->
      </form>
    </div>
  </div>

{% endif %}

{% if page_obj %} 
{% if page_obj.paginator.num_pages > 1 %}  
<ul class="pager">
  {% if page_obj.has_previous %}
  <li class="previous"><a href="?page={{ page_obj.previous_page_number }}">Newer Events</a></li>
  {% else %}
  <li class="previous disabled"><a href="#">Newer Events</a></li>
  {% endif %}

  <span class="page-current">
    Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}.
  </span>

  {% if page_obj.has_next %}
  <li class="next"><a href="?page={{ page_obj.next_page_number }}">Older Events</a></li>
  {% else %}
  <li class="next disabled"><a href="#">Older Events</a></li>
  {% endif %}
</ul>
{% else %}
<br />
{% endif %}
{% endif %}

{% if object_list %}

<table id="myTable" class="table tablesorter">
  <thead><tr>
      <td>FSIS Event</td>
      <td>Species</td>
      <td>Strain</td>
      <td>Number Stocked</td> 
      <td>Event Date</td>
      <td>Site Name</td>
      <td>Clip Applied</td> 
      <td>Development Stage</td></tr>
  </thead>
  <tbody>
    {% for event in object_list %}
    <tr class="{% cycle row1,row2 %}">
      <td> <a href="{% url 'event_detail'  event.id  %}">{{ event.fs_event }}</a> </td>
      <td> {{ event.lot.species.common_name | title }} </td> 
      <td> {{ event.lot.strain.strain_name | title }} </td> 
      <td> {{ event.stkcnt|intcomma }} </td> 
      <td> {{ event.event_date|date }} </td>
      <td> {{ event.site.site_name }} </td> 
      <td> {{ event.clipa }} </td> 
      <td> {{ event.get_development_stage_display }} </td>
    </tr>
    {% endfor %}
  </tbody>
</table>



{% else %}
<p>Sorry no events match that criteria.</p>
{% endif %}



{% if cwt %} 
<div id="outer" style="width:800px;" >
  <div id="map">
    {{ map }}
  </div>
</div> 
{% endif %}

</div>


<script type="text/javascript">

  $(".tablesorter").tablesorter({
  theme: 'bootstrap',
  widthFixed: true,
  showProcessing: true,
  headerTemplate: '{content} {icon}',
  widgets: ['zebra', 'uitheme', 'scroller'],
  widgetOptions: {
  scroller_height: 300,
  scroller_barWidth: 17,
  scroller_jumpToHeader: true,
  scroller_idPrefix: 's_'
  }
  });

</script>




{% endblock %}


